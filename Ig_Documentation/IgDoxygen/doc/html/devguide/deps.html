<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
<head>
<link rel="home" href="http://iguana.cern.ch/">
<link rev="made" href="mailto:iguana-developers@cern.ch">
<link rel="stylesheet" href="../weblayout.css" type="text/css">
<meta name="originator" content="IGUANA Developers">
<meta http-equiv="Reply-to" content="iguana-developers@cern.ch">
<meta http-equiv="Keywords" content="LHC, CMS, IGUANA, interactive,
  graphics, visualisation, toolkit, event display, OpenGL, OpenInventor,
  dependencies">

<title>IGUANA Developer Guide: Dependencies</title>
</head>

<body bgcolor="#ffffff">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
 <!-- Top icon: fixes navigation bar width -->
 <td align="left" valign="top"><table width="100%" border="0">
  <tr><td><img src="../images/pad.gif" width="20" height="1" alt=""></td>
   <td valign="top"><img src="../images/mini.gif" width="98" height="64"
     border="0" alt="Yo!"></td>
   <td><img src="../images/pad.gif" width="70" height="1" alt="*"></tr></table></td>

 <!-- Top banner: title -->
 <td colspan="2"><table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr><td align="left" colspan="2"><font face="Arial, Helvetica" size="-1">
     <font color="#FF00FF">I</font><font color="#009900">nteractive</font>
     <font color="#FF00FF">G</font><font color="#009900">raphics</font>
     <font color="#009900">For</font>
     <font color="#FF00FF">U</font><font color="#009900">ser</font>
     <font color="#FF00FF">ANA</font><font color="#009900">lysis</font>
     <font color="#0020FF">(Version @VERSNUM@)</font></td></tr>
  <tr valign="bottom"><td align="left"><img src="../images/title.gif" width="208"
    height="62"  border="0" alt="IGUANA"></td>
   <td align="right"><font face="Arial, Helvetica" size="+2"><b>
    Developer Guide: Dependencies</b></font></td></tr>
  <tr><td colspan="2" align="left"><hr align="left" noshade="noshade"></td></tr>
 </table></td></tr>

<tr valign="top"><td>
 <!-- Left context navigation bar. -->
 <!-- Navigation button row. -->
 <table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
   <td align="left"><a href="../devguide/"><img src="../images/arrow-up.gif"
    width="34" height="34" alt="[Up]" border="0"></a></td>
   <td align="right"><a href="conventions.html"><img src="../images/arrow-left.gif"
    width="34" height="34" alt="[Prev]" border="0"></a>
    <a href="arch.html"><img src="../images/arrow-right.gif"
    width="34" height="34" alt="[Next]" border="0"></a></td></tr>
 </table></td>
 <td>&nbsp;</td>
 <td>&nbsp;</td></tr>

<tr valign="top"><td bgcolor="#ffffdd">
 <!-- Navigation bar. -->
 <table width="100%" border="0" cellspacing="0" cellpadding="1">
  <tr><td class="nav1"><img src="../images/pad.gif"
    width="10" height="1" hspace="2" alt=" "></td>
   <td class="nav1" colspan="2"><b>Quick Links</b></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="../../releases.html">Releases</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="../main/lxr.html">LXR Index</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="http://isscvs.cern.ch/cgi-bin/viewcvs.cgi/?cvsroot=iguana">CVS</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="../main/faqs.html">FAQs</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="../main/problems.html">Problems?</a></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="2"><b><a
   href="../index.html">IGUANA</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="2"><b><a
   href="../install/">Installation</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="2"><b><a
   href="../userguide/">User Guide</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="2"><b><a
   href="../devguide/">Developer Guide</a></b></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="conventions.html">Conventions</a></td></tr>
  <tr><td class="nav2s">&nbsp;</td><td class="nav2s"><img
    src="../images/marker.gif" width="10" height="10" hspace="2" alt="&gt;"></td>
   <td class="nav2s">Dependencies</td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="oprofile.html">Profiling</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="gl2ps.html">GL to PS</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="arch.html">Architecture</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2"><a href="howto/">How To...?</a></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="2"><b><a
   href="../apiref/">API Reference</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="2"><b><a
   href="../info/">More Information</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td>
   <td class="nav1" colspan="2"><hr noshade="noshade" border="1"></td></tr>
  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="2"><form
    method="get" action="http://www.google.com/custom">
    <font face="Helvetica, Arial, Sans-Serif" size="-1">
     <a href="http://www.google.com/search"><img src="../images/google.gif" border="0"
      alt="Google Search" width="16" height="16"></a>
     <input type="text" name="q" size="11">
     <input type="hidden" name="cof"
     value="LW:98;L:http://iguana.cern.ch/snapshot/images/mini.gif;LH:64;AH:center;S:http://iguana.cern.ch;AWFID:9ebb11a906c88373;">
     <input type="hidden" name="domains" value="iguana.web.cern.ch">
     <input type="hidden" name="sitesearch" value="iguana.web.cern.ch">
     <b><input value="Search" type="submit"></b></font></form>
     <!-- <br><input type="radio" name="sitesearch" value="" checked> Search WWW
      <input type="radio" name="sitesearch" value="iguana.web.cern.ch"> Search IGUANA</font> -->
    </form>
   </td></tr></table>
</td>
<td>&nbsp;</td>

<td width="100%" align="left" valign="top">
 <h3>Dependencies for this release</h3>
 <div class="sect1"><ul>
  <li> Scientific Linux CERN 3:  <a href="../deps/slc3-ia32-gcc323/">SLC3 (GCC 3.2.3)</a>
 </ul></div>

 <h3>About dependency diagrams</h3>
 <div class="sect1">
  <p>IGUANA includes a small utility, Ig_Infrastructure/IgNominy, to analyse
  software dependencies.  Results of running that tool are included in
  each IGUANA release in the <tt>doc/deps</tt> directory.  The directory
  contains a subdirectory for each platform the release was built on,
  usually <tt>linux</tt> and <tt>sunos</tt>.  In that directory you can
  find the index page <tt>index.html</tt> that points to the analysis
  results in a convenient way.</p>

  <p>The dependencies show exactly what each package depends on.  The
  information is available both as a summary table and graphical diagrams.
  For example, to find out what Ig3DViewer depends on, follow the link
  ``Dependency statistics'' to the table, find the ``All dependencies''
  table and see which columns are occupied.  Alternatively, check the
  index page for a diagram named <tt>iguana-Ig3DViewer-dir-purpose</tt>,
  meaning Ig3DViewer direct source + binary dependencies coloured by
  package purpose (e.g. violet is 3D-related).  It shows graphically the
  same information.  You can also download PostScript versions of the
  diagrams from the index page.</p>
 </div>

 <h3>IgNominy</h3>
 <div class="sect1">
  <blockquote>
    <font color="#a52a2a"><i>ignominy:</i> dishonour, disgrace, shame;
    infamy; the condition of being in disgrace, etc.</font> (Oxford
    English Dictionary)
  </blockquote>

  <p>IgNominy examines package dependencies by examining a built source
  tree.  It scans makefile dependency data (for header files the compiler
  actually saw), source code, binaries and dynamic loader information for
  possible dependencies, resolves them and outputs a simple textual
  database.  If environment variable $VERBOSE is set, you will also get a
  very verbose log to your standard error output (see <tt>mkdeps</tt> in
  IgNominy for details).  The information collected by IgNominy is then
  further processed by a number of presentation tools.  The dependency
  diagrams are generated using the <a
  href="http://www.research.att.com/sw/tools/graphviz/">Graphviz
  package</a> from AT&amp;T.</p>

  <p>In general, you would want to run IgNominy after having built the
  entire release, as described in the <a href="../devguide/howto/build.html">build
  instructions</a>.  Note that the location of external libraries and
  source code is determined automatically querying the SCRAM configuration
  by <tt>mkconfs</tt>.  Some additional IGUANA-specific configuration is
  in the <tt>path.conf</tt> file in IgNominy package.</p>

  <p>If you wish to create more dependency diagrams, edit the
  <tt>mkgraphs</tt> script in IgNominy (add the packages you want
  dependencies for to the list in the for-loop at the end of the script)
  and then run <tt>scram b dependencies</tt>.  If you have already
  collected the dependencies and just want to create more diagrams, edit
  <tt>mkgraphs</tt>, go to the root of your SCRAM build area and run
  <tt>src/Ig_Infrastructure/IgNominy/mkgraphs linux-2.2</tt> to
  regenerate the diagrams.  You may also want to rerun <tt>mkgifs</tt> to
  regenerate the GIF versions and <tt>mkdirindex</tt> to regenerate the
  web index page (run them exactly the same way as <tt>mkgraphs</tt>
  above).  Or more simply, simply comment out the stages you do not
  wish to redo in <tt>mkall</tt> and rerun <tt>scram b dependencies</tt>.
 </div>

 <h3>IgNominy Metrics</h3>
 <div class="sect1">
  <p>IgNominy also calculates some simple metrics following <a
  href="http://cseng.aw.com/bookpage.taf?ISBN=0-201-63362-0">John Lakos:
  Large Scale C++ Software Design</a>.  While IGUANA does not yet have a
  comprehensive testing framework, these metrics give a rough idea of how
  good the physical partitioning of a release really is.  The meatrics
  measure degree of <i>component dependency</i>, that is, the number of
  other (physical) components required to thoroughly and incrementally
  test a particular component.  This also introduces the idea of
  <i>package levels</i>: packages on the lower levels must be tested
  before those on the higher levels (hence the incrementality).</p>

  <p>The component dependency (which IgNominy calculates for packages, not
  individual classes) indicates how many other libraries must be linked
  into the test drivers of that package.  The component dependency is
  <i>cumulative</i>: a package on level zero has no dependencies and hence
  cumulative component dependency (CCD) of 1 (it requires itself for
  testing) and the CCD of any other package is the sum of the CCDs of all
  the packages it uses.  Essentially the CCD of a package tells how costly
  it is to test the package thoroughly.  The CCD of the release is simply
  the sum of the CCD of all the packages in and used by the release.  That
  is, the CCD IgNominy calculates includes the testing cost for all
  external software.</p>

  <p>A couple of other numbers calculated by IgNominy are the average
  component dependency (ACD) and the normalized cumulative component
  dependency (NCCD).  ACD is simply the release CCD divided by the number
  of packages involved, and indicates how many libraries are required on
  average in the tests.  NCCD measures how the package dependencies
  compare to a balanced binary tree.  NCCD less than one indicates that
  the package structure is more flat or horizontal than a balanced tree,
  and NCCD greater than one indicates that it is more vertical and/or
  tightly coupled.  The NCCD value is followed by the minimum and maximum
  bounds: no interdependencies and total interconnectivity, respectively.
  A toolkit-like system such as IGUANA should have a NCCD less than 1.0,
  approximately 0.8.  NCCD substantially greater than 1.0 would indicate
  that there may be significant cyclic physical coupling within the
  system.</p>

  <p>Note however that Lakos has this to say about NCCD:

  <blockquote>
    NCCD is <i>not</i> a measure of the relative quality of the system.
    NCCD is simply a tool for characterizing the degree of coupling within
    a subsystem.  Increasing the number of components in a system could
    artificially reduce the NCCD.  One way to do this is to eliminate
    completely valid reuse; this would likely not be an improvement.
    [...]  <b>Minimising CCD for a given set of components is a design
    goal.</b> Reducing the CCD in a system of a given size is almost
    always desirable.  Reducing the size (number of components) of a
    system is also desirable but not at the cost of introducing cyclic
    dependencies, inappropriately merging components, or creating
    unmanageably large translation units.  [...]  The precise numerical
    value of the CCD (or the NCCD) for a given system is not important.
    What is important is actively designing systems to keep the CCD for
    each subsystem from becoming larger than necessary.
  </blockquote>

  <p>Finally, IgNominy calculates another similar metric, the number of
  outgoing links for each package and the average over the system.  Unlike
  ACD that measures all dependencies of a package, this number indicates
  the average number of <i>direct</i> dependencies.</p>
 </div>
</td></tr>

<tr>
 <td bgcolor="#ffffdd"><table border="0" width="100%"><tr>
   <td align="left"><a href="mailto:iguana-developers@cern.ch"><img
    src="../images/mailto.gif" border="0" width="14" height="10"
    alt="[Mail]"></a></td>
   <td align="right"><font face="Arial, Helvetica"
    size="-2">$Date: 2006/09/11 07:45:25 $</font></td></tr></table></td>
 <td><font face="Arial, Helvetica" size="-2">&nbsp;</font></td>
 <td><font face="Arial, Helvetica" size="-2">&nbsp;</font></td></tr>
</table>
</body>
</html>
