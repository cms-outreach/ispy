<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
<head>
<link rel="home" href="http://iguana.cern.ch/">
<link rev="made" href="mailto:iguana-developers@cern.ch">
<link rel="stylesheet" href="../../weblayout.css" type="text/css">
<meta name="originator" content="IGUANA Developers">
<meta http-equiv="Reply-to" content="iguana-developers@cern.ch">
<meta http-equiv="Keywords" content="LHC, CMS, IGUANA, interactive,
  graphics, visualisation, toolkit, event display, OpenGL, OpenInventor,
  how to, new package">

<title>IGUANA Developer Guide: How To Create a Package</title>
</head>

<body bgcolor="#ffffff">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
 <!-- Top icon: fixes navigation bar width -->
 <td align="left" valign="top"><table width="100%" border="0">
  <tr><td><img src="../../images/pad.gif" width="20" height="1" alt=""></td>
   <td valign="top"><img src="../../images/mini.gif" width="98" height="64"
     border="0" alt="Yo!"></td>
   <td><img src="../../images/pad.gif" width="70" height="1" alt="*"></tr></table></td>

 <!-- Top banner: title -->
 <td colspan="2"><table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr><td align="left" colspan="2"><font face="Arial, Helvetica" size="-1">
     <font color="#FF00FF">I</font><font color="#009900">nteractive</font>
     <font color="#FF00FF">G</font><font color="#009900">raphics</font>
     <font color="#009900">For</font>
     <font color="#FF00FF">U</font><font color="#009900">ser</font>
     <font color="#FF00FF">ANA</font><font color="#009900">lysis</font>
     <font color="#0020FF">(Version @VERSNUM@)</font></td></tr>
  <tr valign="bottom"><td align="left"><img src="../../images/title.gif" width="208"
    height="62"  border="0" alt="IGUANA"></td>
   <td align="right"><font face="Arial, Helvetica" size="+2"><b>
    Developer Guide:<br>How To Create a Package</b></font></td></tr>
  <tr><td colspan="2" align="left"><hr align="left" noshade="noshade"></td></tr>
 </table></td></tr>

<tr valign="top"><td>
 <!-- Left context navigation bar. -->
 <!-- Navigation button row. -->
 <table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
   <td align="left"><a href="../howto/"><img src="../../images/arrow-up.gif"
    width="34" height="34" alt="[Up]" border="0"></a></td>
   <td align="right"><a href="build.html"><img src="../../images/arrow-left.gif"
    width="34" height="34" alt="[Prev]" border="0"></a>
    <a href="new-plugin.html"><img src="../../images/arrow-right.gif"
    width="34" height="34" alt="[Next]" border="0"></a></td></tr>
 </table></td>
 <td>&nbsp;</td>
 <td>&nbsp;</td></tr>

<tr valign="top"><td bgcolor="#ffffdd">
 <!-- Navigation bar. -->
 <table width="100%" border="0" cellspacing="0" cellpadding="1">
  <tr><td class="nav1"><img src="../../images/pad.gif"
    width="10" height="1" hspace="2" alt=" "></td>
   <td class="nav1" colspan="3"><b>Quick Links</b></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2" colspan="2"><a href="../../../releases.html">Releases</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2" colspan="2"><a href="../../main/lxr.html">LXR Index</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2" colspan="2"><a href="http://isscvs.cern.ch/cgi-bin/viewcvs.cgi/?cvsroot=iguana">CVS</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2" colspan="2"><a href="../../main/faqs.html">FAQs</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2" colspan="2"><a href="../../main/problems.html">Problems?</a></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="3"><b><a
   href="../../index.html">IGUANA</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="3"><b><a
   href="../../install/">Installation</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="3"><b><a
   href="../../userguide/">User Guide</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="3"><b><a
   href="../../devguide/">Developer Guide</a></b></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2" colspan="2"><a href="../conventions.html">Conventions</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2" colspan="2"><a href="../deps.html">Dependencies</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2" colspan="2"><a href="../arch.html">Architecture</a></td></tr>
  <tr><td class="nav2">&nbsp;</td><td class="nav2">&nbsp;&nbsp;</td>
   <td class="nav2" colspan="2"><a href="../howto/">How To...?</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="build.html">Build</a></td></tr>
  <tr><td class="nav3s">&nbsp;</td><td class="nav3s">&nbsp;&nbsp;</td>
   <td class="nav3s"><img src="../../images/marker.gif"
    width="10" height="10" hspace="2" alt="&gt;"></td>
   <td class="nav3s">Create a Package</td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="new-plugin.html">Create a Plug-in</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="new-driver.html">Create a Driver</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="new-service.html">Create a Service</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="new-model.html">Create a Model</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="new-browser.html">Create a Browser</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="new-representable.html">Create a Representable</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="new-repmap.html">Create a Rep Mapping</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="update-config.html">Update Configuration</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="other-projects.html">Work With Other Projects</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="release.html">Release IGUANA</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="debug.html">Debug</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="webpages.html">Update Web Pages</a></td></tr>
  <tr><td class="nav3">&nbsp;</td><td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3">&nbsp;&nbsp;</td>
   <td class="nav3"><a href="screenshot.html">Make a Screen Shot</a></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="3"><b><a
   href="../../apiref/">API Reference</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="3"><b><a
   href="../../info/">More Information</a></b></td></tr>

  <tr><td class="nav1">&nbsp;</td>
   <td class="nav1" colspan="3"><hr noshade="noshade" border="1"></td></tr>
  <tr><td class="nav1">&nbsp;</td><td class="nav1" colspan="3"><form
    method="get" action="http://www.google.com/custom">
    <font face="Helvetica, Arial, Sans-Serif" size="-1">
     <a href="http://www.google.com/search"><img src="../../images/google.gif" border="0"
      alt="Google Search" width="16" height="16"></a>
     <input type="text" name="q" size="11">
     <input type="hidden" name="cof"
     value="LW:98;L:http://iguana.cern.ch/snapshot/images/mini.gif;LH:64;AH:center;S:http://iguana.cern.ch;AWFID:9ebb11a906c88373;">
     <input type="hidden" name="domains" value="iguana.web.cern.ch">
     <input type="hidden" name="sitesearch" value="iguana.web.cern.ch">
     <b><input value="Search" type="submit"></b></font></form>
     <!-- <br><input type="radio" name="sitesearch" value="" checked> Search WWW
      <input type="radio" name="sitesearch" value="iguana.web.cern.ch"> Search IGUANA</font> -->
    </form>
   </td></tr></table>
</td>
<td>&nbsp;</td>

<td width="100%" align="left" valign="top">
 <h3>Overview</h3>
 <div class="sect1"><p>To create a package in IGUANA you need
   administrator rights in the CVS repository.  If you have the
   rights, follow these steps:</p>
   <ul>
     <li> <a href="#location">Decide a location for the package.</a>
     <li> <a href="#cvscreate">Create a new package in CVS.</a>
     <li> <a href="#cvsco">Check the package out from CVS.</a>
     <li> <a href="#describe">Add a short package description.</a>
     <li> <a href="#buildorder">Add the package into the build order.</a>
     <li> <a href="#buildfile">Modify <tt>BuildFile</tt>.</a>
   </ul>
 </div>

 <h3><a name="location">Decide a location for the package</a></h3>
 <div class="sect1"><p>The first step is to decide a subsystem
   location for the new package.  This depends on the function of the
   package.  Use the following table to decide which subsystem to put
   your package into:</p>

   <table border="0" cellpadding="5">
     <tr valign="baseline"><td><tt>Ig_Data</tt></td>
      <td>Pure build- or run-time resource data such material
      definitions or pixmaps.  No code here please.</td></tr>

     <tr valign="baseline"><td><tt>Ig_Documentation</tt></td>
      <td>IGUANA documentation -- it goes all here.</td></tr>

     <tr valign="baseline"><td><tt>Ig_Infrastructure</tt></td>
      <td>All packages that relate to our build and development
      infrastructure.  Includes build scripts, documentation systems,
      quality assesment tools, etc.</td></tr>

     <tr valign="baseline"><td><tt>Ig_Imports</tt></td>
      <td>All imported software as well as hacks to get non-imported
      external software to compile and link properly.  However, do not
      put actual interface layers to external or imported software
      here.  In general, if you import software here, do not modify it
      -- try to get the changes back to the original authors and get
      the modifications in the next release.  If the external tools
      require special build configuration, change the package class in
      <tt>config/BuildFile</tt> and write a special makefile for it in
      <tt>config</tt> directory (if it is based on GNU autotools,
      please refer to the SoQt configuration).  Also add a
      <tt>BuildFile</tt> to export the package features.</td></tr>
   
     <tr valign="baseline"><td><tt>Ig_Extensions</tt></td>
      <td>Interfaces and adaptors for external software.  In general
      these are mostly additional Qt widgets and utilities.  Most
      packages belong in <tt>Ig_Modules</tt>, not here; add a new
      package here only after all IGUANA developers have formed a
      consensus on it.</td></tr>

     <tr valign="baseline"><td><tt>Ig_Framework</tt></td>
      <td>Packages for IGUANA framework architecture.  In general
      you should not add packages here; talk to Lassi if you feel
      your package belongs here.</td></tr>
   
     <tr valign="baseline"><td><tt>Ig_Examples</tt></td>
      <td>Legacy example programs.  Do not add new packages here.
      New example- or demo-programs should be plug-ins under
      <tt>Ig_Modules</tt>.</td></tr>
   
     <tr valign="baseline"><td><tt>Ig_Applications</tt></td>
      <td>Applications go here.  However, there shouldn't many new
      of those -- most new applications should be drivers and
      created under <tt>Ig_Modules</tt>.</td></tr>
   
     <tr valign="baseline"><td><tt>Ig_Modules</tt></td>
      <td>Most new stuff should go here.</td></tr>
   </table>
 </div>

 <h3><a name="cvscreate">Create a new package in CVS</a></h3>

 <div class="sect1"><p>Edit the subsystem's <tt>.admin/NewLeaf</tt>.
   The "Valid Username" should be your CMS UNIX account name at
   CERN and recognised as a developer account on the CVS server.
   The "Valid Email" should be your e-mail address.  The "New Leaf
   Name" should be the name of the package subdirectory, such as
   <tt>IgFoo</tt>, without the leading subsystem name.</p>

   <table border="0" class="admon.note" cellspacing="0" cellpadding="0">
    <tr valign="top"><td><img src="../../images/admon-caution.gif"
      width="29" height="29" vspace="10" hspace="10" alt="Note"></td>
     <td>All IGUANA packages and classes must begin with the prefix
     "<tt>Ig</tt>".  Words in the name must have first letter
     capitalised, and then combined together (no intervening slashes
     or underscores).  The only packages exempt from this convention
     are the imported packages under <tt>Ig_Imports</tt>.  Please
     refer to the <a href="../conventions.html">conventions
     document</a> for more details.
    </td></tr></table>

   <p>Check in the <tt>.admin/NewLeaf</tt> with an empty message and
   ignore the check-in error.  Usually you then want to <tt>rm</tt>
   <tt>.admin/NewLeaf</tt> and "<tt>cvs up .admin</tt>" so that your
   modified file won't get accidentally checked in again.</p>
   <pre>$ cvs ci -m '' .admin/NewLeaf
$ rm -f .admin/NewLeaf
$ cvs up .admin</pre>
 </div>

 <h3><a name="cvsco">Check the package out from CVS</a></h3>
 <div class="sect1"><p>Now check out the package.  In the subsystem
   where you edited <tt>.admin/NewLeaf</tt> to add <tt>IgFoo</tt>
   now say:</p>
   <pre>$ cvs up IgFoo</pre>
 </div>

 <h3><a name="describe">Add a short package description</a></h3>
 <div class="sect1"><p>Go into the subdirectory created by the
   check out and edit the <tt>doc/html/index.html</tt>.  Add a
   brief description of what this package is all about.  The
   description will appear in the "Repository Structure"
   documentation generated automatically for each release.</p>
 </div>

 <h3><a name="buildorder">Add the package into the build order</a></h3>
 <div class="sect1"><p>Now, add your package to the IGUANA build order
   -- otherwise it won't get built if you build the release from the
   top-level.  Edit <tt>config/Project_makefile.mk</tt> and add your
   package in the appropriate location in the list.  Note that since
   we link our libraries against their dependencies, you must add your
   package after all the packages you depend on.</p>
 </div>

 <h3><a name="buildfile">Modify <tt>BuildFile</tt></a></h3>
 <div class="sect1"><p>Finally, modify your <tt>BuildFile</tt> to
   cause your package to be linked against its dependencies and to
   provide its user packages the appropriate library.  </p>

   <p>Our convention is that every package exports to the outside
   world what it provides; it is not the business of any other package
   to know those details.  Therefore use only <tt>&lt;use&gt;</tt>
   or <tt>&lt;external&gt;</tt> and not <tt>&lt;lib&gt;</tt> in your
   <tt>BuildFile</tt>; use <tt>&lt;lib&gt;</tt> only if there is no
   other choice (read: you are depending on somebody else's package
   and cannot have that <tt>BuildFile</tt> changed).  The implication
   on your package is that you must <tt>&lt;use&gt;</tt> every package
   from which you <tt>#include</tt> headers from.  Do not add
   <tt>&lt;use&gt;</tt>s for packages you need indirectly, the
   packages you use directly take care of that for you, just as you
   do.  Also add an <tt>&lt;export&gt;</tt> section to export your
   library to other packages with a <tt>&lt;lib&gt;</tt>.</p>

   <p>The net result of these steps is that SCRAM will know what
   libraries your package must link against, and other packages using
   your library will know what yours depends on without having to know
   the details themselves -- they get your library and everything else
   it needs.</p>

   <p>The <tt>BuildFile</tt> in the new package root directory should
   look something like this:</p>

   <pre>&lt;Use name=Ig_Extensions/IgQt&gt;
&lt;External ref=Qt&gt;

&lt;Export&gt;
  &lt;Lib name=IgFooBar&gt;
&lt;/Export&gt;</pre>
 </div>

</td></tr>

<tr>
 <td bgcolor="#ffffdd"><table border="0" width="100%"><tr>
   <td align="left"><a href="mailto:iguana-developers@cern.ch"><img
    src="../../images/mailto.gif" border="0" width="14" height="10"
    alt="[Mail]"></a></td>
   <td align="right"><font face="Arial, Helvetica"
    size="-2">$Date: 2006/09/11 07:45:25 $</font></td></tr></table></td>
 <td><font face="Arial, Helvetica" size="-2">&nbsp;</font></td>
 <td><font face="Arial, Helvetica" size="-2">&nbsp;</font></td></tr>
</table>
</body>
</html>
