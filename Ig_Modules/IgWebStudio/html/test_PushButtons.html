<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Foo</title>
</head>
<script type="text/javascript" src="Studio/getScript?name=Inheritance.js"></script>
<script type="text/javascript" src="Studio/getScript?name=State.js"></script>
<script type="text/javascript" src="Studio/getScript?name=Evt.js"></script>
<script type="text/javascript" src="Studio/getScript?name=NodeUtils.js"></script>
<script type="text/javascript" src="Studio/getScript?name=HTTPRequest.js"></script>
<script type="text/javascript" src="Studio/getScript?name=PluginLoader.js"></script>
<script type="text/javascript">
importClass ("Studio.State")
importClass ("Studio.PushButton")
importClass ("Studio.Column")
importClass ("Studio.Row")
importClass ("Studio.Workspace")
importClass ("Studio.Panel")
importClass ("Studio.InputDialog")

//This whole class should be renamed as "MCCreatePayloadDialog"
function TestDialog (state, id, title, onloadCallback)
{
	if (arguments.length > 0)
	{
		this.init (state, id, title, onloadCallback);
	}    
}

TestDialog.inherits (Dialog);

TestDialog.method ('init', function (state, id, title, onloadCallback) {
    this.uber ('init', state, id, title);
    this.id = id;
    this.div.style.top = '40%';
    this.div.style.left = '30%';
    this.div.style.align = 'center';
    this.div.style.verticalAlign = 'middle';
    this.div.style.width = '40%';
//    this.div.style.height = '';
//    this.contentsDiv.style.height = '100px';
    
    var column = new Column (this);
    column.div.style.height = "100px";
    var row = new Row (column);
    this.createButton = new PushButton (row, "Create Workflow");
    this.createButton.button.dialog = this;
    
    this.cancelButton = new PushButton (row, "Cancel");
    this.cancelButton.button.dialog = this;

    this.div.style.height = '';    
});

TestDialog.method ('wizard', function () {
	Evt.addEventListener (this.createButton.button, "click", TestDialog.prototype.createWorkflow, true);
	Evt.addEventListener (this.cancelButton.button, "click", TestDialog.prototype.cancel, true);
    this.show ();
});

TestDialog.method ('setCallback', function (callback) {
    this.button.callback = callback;
});

TestDialog.method ('createWorkflow', function (evt) {
    alert ("request.http.responseText");
    this.dialog.hide ();
});

TestDialog.method ("cancel", function () {
    alert ("Hide called");
    this.dialog.hide ();
});

function windowLoaded (event)
{
    
    mainDiv = document.getElementById ("workspace");
    state = new State ();
    workspace = new Workspace (document.state, mainDiv);
    var panel = new Panel (state, workspace, "mypanel", 'title');
    var dialog = new TestDialog (state, 'foo', 'bar');
    
    dialog.wizard ("Foo");
    
    var column1 = new Column (panel);
    var row1 = new Row (column1);
    var b1 = new PushButton (row1, "Foo");
    var b2 = new PushButton (row1, "Bar");
    var row2 = new Row (column1);
    var b3 = new PushButton (row2, "Foo");
    var b4 = new PushButton (row2, "Bar");
    dialog.show ();
}
</script>

<body ID="workspace" onload="windowLoaded (event);">
<div ID="workspaceee" width="100%" height="100%"></div>

</body>
</html>